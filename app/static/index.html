<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prédicteur de Prix Immobilier</title>
    <link rel="stylesheet" href="/static/css/style.css">
 
</head>
<body>
    <div class="container">
        <h1>  Prédiction de Prix Immobilier</h1>
        <p class="subtitle">Estimez le prix de votre bien en quelques étapes</p>

        <div id="error-container"></div>

        <div class="progress-bar">
            <div class="progress-step active" id="step1">1</div>
            <div class="progress-step" id="step2">2</div>
            <div class="progress-step" id="step3">3</div>
            <div class="progress-step" id="step4">4</div>
        </div>

        <!-- Étape 1: Type de bien -->
        <div class="form-section active" id="section1">
            <h2 style="margin-bottom: 20px; color: #333; font-size: 20px;">Type de bien</h2>
            <div class="type-grid">
                <div class="type-card" data-type="maison">
                    <img src="/static/images/maison.jpg" alt="Maison" class="type-image">
                    <div class="type-label">Maison</div>
                </div>
                <div class="type-card" data-type="appartement">
                    <img src="/static/images/appartement.jpg" alt="Appartement" class="type-image">
                    <div class="type-label">Appartement</div>
                </div>
                <div class="type-card" data-type="villa">
                    <img src="/static/images/villa.jpg" alt="Villa" class="type-image">
                    <div class="type-label">Villa</div>
                </div>
                <div class="type-card" data-type="bureau">
                    <img src="/static/images/bureau.jpg" alt="Bureau" class="type-image">
                    <div class="type-label">Bureau</div>
                </div>
                <div class="type-card" data-type="riad">
                    <img src="/static/images/riad.jpg" alt="Riad" class="type-image">
                    <div class="type-label">Riad</div>
                </div>
                <div class="type-card" data-type="local_commercial">
                    <img src="/static/images/local.jpg" alt="Local Commercial" class="type-image">
                    <div class="type-label">Local Commercial</div>
                </div>
                <div class="type-card" data-type="terrain">
                    <img src="/static/images/terrain.jpg" alt="Terrain" class="type-image">
                    <div class="type-label">Terrain</div>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn-primary" onclick="nextStep()" id="nextBtn1" disabled>Suivant</button>
            </div>
        </div>

        <!-- Étape 2: Localisation -->
        <div class="form-section" id="section2">
            <h2 style="margin-bottom: 20px; color: #333; font-size: 20px;">Localisation</h2>
            <div class="form-group">
                <label>Ville</label>
                <select id="ville" onchange="loadQuartiers()">
                    <option value="">Sélectionnez une ville</option>
                </select>
            </div>
            <div class="form-group">
                <label>Quartier</label>
                <select id="quartier" onchange="validateStep2()">
                    <option value="">D'abord sélectionner une ville</option>
                </select>
            </div>
            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">Précédent</button>
                <button class="btn-primary" onclick="nextStep()" id="nextBtn2" disabled>Suivant</button>
            </div>
        </div>

        <!-- Étape 3: Caractéristiques -->
        <div class="form-section" id="section3">
            <h2 style="margin-bottom: 20px; color: #333; font-size: 20px;">Caractéristiques</h2>
            <div class="form-group">
                <label>Surface (m²)</label>
                <input type="number" id="surface" min="1" placeholder="Ex: 120">
            </div>
            <div class="form-group" id="chambresGroup">
                <label>Nombre de chambres</label>
                <input type="number" id="nombre_de_chambres" min="0" placeholder="Ex: 2">
            </div>
            <div class="form-group" id="sallesGroup">
                <label>Nombre de salles de bain</label>
                <input type="number" id="nombre_de_salles_de_bain" min="0" placeholder="Ex: 1">
            </div>
            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">Précédent</button>
                <button class="btn-primary" onclick="nextStep()" id="nextBtn3" disabled>Suivant</button>
            </div>
        </div>

        <!-- Étape 4: Équipements -->
        <div class="form-section" id="section4">
            <h2 style="margin-bottom: 20px; color: #333; font-size: 20px;">Équipements</h2>
            <div id="equipements"></div>
            <div class="btn-group">
                <button class="btn-secondary" onclick="prevStep()">Précédent</button>
                <button class="btn-primary" onclick="predict()">Estimer le prix</button>
            </div>
        </div>

        <!-- Résultat -->
        <div class="result-card" id="result">
            <div style="font-size: 64px; margin-bottom: 20px;">✅</div>
            <h2 style="color: #333; margin-bottom: 10px;">Prix estimé</h2>
            <div class="price-display" id="priceDisplay">---</div>
            <p class="price-label">Dirhams Marocains (MAD)</p>
            <button class="btn-primary" onclick="reset()" style="max-width: 300px; margin: 0 auto;">Nouvelle estimation</button>
        </div>

        <!-- Loading -->
        <div class="loading hidden" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px; color: #666;">Calcul en cours...</p>
        </div>
    </div>

    <!-- Chargez le fichier data.js généré -->
    <script src="/static/js/data.js"></script>
    <script src="/static/js/script.js"></script>
</body>
</html>